!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=2)}([function(e,t){let a=document.querySelector(".add-trip-btn"),n=document.querySelector(".manage-trips-btn"),o=document.querySelector(".settings-btn"),l=(document.querySelector(".go-up-btn"),document.querySelector(".error")),s=document.querySelector(".main .register"),r=document.querySelector(".main .login-btn"),c=document.querySelector(".main .login"),i=document.querySelector(".main .forgot-password-btn"),d=document.querySelector(".main .register-btn"),p=document.querySelector(".main .logout-btn"),u=document.querySelector(".main .wrapper .filters"),g=document.querySelectorAll(".main .wrapper .filters .categories .category input"),m=document.querySelector(".main .filters .days .days-number"),h=document.querySelector(".main .filters .days .plus-btn"),y=document.querySelector(".main .filters .days .minus-btn"),f=document.querySelector(".main .wrapper .filters .people .adults .adults-number"),v=document.querySelector(".main .wrapper .filters .people .adults .plus-btn"),b=document.querySelector(".main .wrapper .filters .people .adults .minus-btn"),S=document.querySelector(".main .wrapper .filters .people .children .children-number"),E=document.querySelector(".main .wrapper .filters .people .children .plus-btn"),L=document.querySelector(".main .wrapper .filters .people .children .minus-btn"),T=document.querySelector(".results .price-asc"),P=document.querySelector(".results .price-desc"),w=document.querySelector(".results > .wrapper"),I=document.querySelector(".results .load-more-btn"),x=document.querySelector(".location .name"),A=document.querySelector(".location .save-btn"),C=document.querySelector(".location .category"),_=document.querySelector(".location .country-name"),N=document.querySelector(".flights"),B=document.querySelector(".load-more-btn"),D=document.querySelector(".searches"),$=document.querySelector(".main .load-more-btn");console.log("dawfesdgvd");let k={addTripBtn:a,manageTripsBtn:n,settingsBtn:o,error:l,signupPage_form:s,signupPage_loginBtn:r,loginPage_form:c,loginPage_forgotPasswordBtn:i,loginPage_registerBtn:d,settingsPage_logoutBtn:p,addTripPage_categories:g,addTripPage_form:u,addTripPage_days:m,addTripPage_daysPlusBtn:h,addTripPage_daysMinusBtn:y,addTripPage_adults:f,addTripPage_adultsPlusBtn:v,addTripPage_adultsMinusBtn:b,addTripPage_children:S,addTripPage_childrenPlusBtn:E,addTripPage_childrenMinusBtn:L,addTripPage_results:w,addTripPage_priceAscBtn:T,addTripPage_priceDescBtn:P,addTripPage_loadMoreBtn:I,tripDetailsPage_locationName:x,tripDetailsPage_saveBtn:A,tripDetailsPage_category:C,tripDetailsPage_countryName:_,tripDetailsPage_flights:N,tripDetailsPage_loadMoreBtn:B,mainPage_searches:D,mainPage_loadMoreBtn:$};console.log("IN ALL HTML ELEMENTS"),console.log("da",document.getElementById("min")),console.log("usableElemtns",k),e.exports={usableElements:k}},function(e,t,a){const{usableElements:n}=a(0);e.exports={showError:e=>{const{error:t}=n;console.log(";er",t),t.style.display="block",t.innerText=e},removeError:()=>{console.log("removeError");const{error:e}=n;e.style.display="none"},convertDate:e=>{let t=new Date(e);console.log(t);let a="";a=t.getDate()<9?`0${t.getDate()}`:`${t.getDate()}`;let n="";return`${n=t.getMonth()+1<10?`0${t.getMonth()+1}`:`${t.getMonth()+1}`}/${a}/${`${t.getFullYear()}`}`}}},function(e,t,a){a(3),a(4),a(5),a(6),a(8),a(10),a(17)},function(e,t){new window.Worker("./firebase-messaging-sw.js")},function(e,t){firebase.initializeApp({apiKey:"AIzaSyA1dgH05PR1kAHUCwC2FsF3CMs4ZEdeAck",authDomain:"tripinspirev2.firebaseapp.com",databaseURL:"https://tripinspirev2.firebaseio.com",projectId:"tripinspirev2",storageBucket:"",messagingSenderId:"157419986089",appId:"1:157419986089:web:8255b81cb278938c"});const a=firebase.messaging();a.usePublicVapidKey("BLyXow0oRyprCxtOCaD2a6yBl-QjlAC9AvbArBmgDmsmYpROdiMK42TE2yxFXHlfJPsieZb2EEdf6oKFXbyQWpQ"),a.requestPermission().then(()=>(console.log("yesss"),a.getToken())).then(e=>{console.log("token",e);const t="http://localhost:8080/notifications";console.log("url",t),fetch(t,{method:"POST",body:JSON.stringify({token:e})}).then(e=>{e.json().then(e=>{console.log("result")}).catch(e=>console.log("err",e))})}).catch(e=>{console.log("NOOO :((")}),a.onTokenRefresh(()=>{a.getToken().then(e=>{})}),a.onMessage(e=>{console.log("message received",e)})},function(e,t,a){const{usableElements:n}=a(0),{addTripBtn:o,manageTripsBtn:l,settingsBtn:s}=n;o&&l&&s&&(o.addEventListener("click",()=>{window.location.replace("http://localhost:8080/add-trip")}),l.addEventListener("click",()=>{window.location.replace("http://localhost:8080/")}),s.addEventListener("click",()=>{window.location.replace("http://localhost:8080/settings")}))},function(e,t,a){const{usableElements:n}=a(0),{signupPostRequest:o}=a(7),{showError:l,removeError:s}=a(1),{signupPage_form:r,signupPage_loginBtn:c}=n;r&&c&&(r.addEventListener("submit",e=>{e.preventDefault();let t=r.emailInput.value,a=r.passwordInput.value;a===r.passwordConfirm.value?(s(),o({email:t,password:a}).then(()=>{window.location.replace("http://localhost:8080/login")}).catch(e=>{l(e)})):l("Password confirmation must be the same as password")}),c.addEventListener("click",()=>{window.location.href="http://localhost:8080/login.html"}))},function(e,t){e.exports={signupPostRequest:e=>(console.log("in signupPostRequest"),new Promise((t,a)=>{fetch("http://localhost:8080/register-user",{method:"POST",body:JSON.stringify(e)}).then(e=>{e.json().then(e=>{e.success?t():a(e.text)})}).catch(e=>{console.log("err from server",e)})}))}},function(e,t,a){const{usableElements:n}=a(0),{loginPostRequest:o}=a(9),{loginPage_form:l,loginPage_registerBtn:s,loginPage_forgotPasswordBtn:r}=n,{showError:c,removeError:i}=a(1);l&&s&&r&&(l.addEventListener("submit",e=>{e.preventDefault();let t=l.emailInput.value,a=l.passwordInput.value;console.log("email",t),console.log("password",a),o({email:t,password:a}).then(()=>{console.log("da"),window.location.replace("http://localhost:8080/")}).catch(e=>{c(e)})}),s.addEventListener("click",()=>{window.location.href="http://localhost:8080/signup"}))},function(e,t){e.exports={loginPostRequest:e=>new Promise((t,a)=>{fetch("http://localhost:8080/login-user",{method:"POST",body:JSON.stringify(e)}).then(e=>{e.json().then(e=>{console.log(e),e.success?t():a(e.text)}).catch(e=>console.log("err",e))})})}},function(e,t,a){a(11),a(13),a(15)},function(e,t,a){const{usableElements:n}=a(0);console.log("dawefef");const{showError:o,removeError:l,convertDate:s}=a(1),{addTripPage_categories:r,addTripPage_form:c,addTripPage_days:i,addTripPage_daysPlusBtn:d,addTripPage_daysMinusBtn:p,addTripPage_adults:u,addTripPage_adultsPlusBtn:g,addTripPage_adultsMinusBtn:m,addTripPage_children:h,addTripPage_childrenPlusBtn:y,addTripPage_childrenMinusBtn:f,addTripPage_results:v,addTripPage_loadMoreBtn:b}=n;if(r&&c&&i&&d&&p&&u&&g&&m&&h&&y&&f&&v&&b){console.log("addTripPage_results",v),console.log("dawefef"),console.log("dawefef");const{viewAddTrip:e}=a(12);console.log("dawefef");let t=!0;console.log("dawefef"),console.log("searchForm",c.minPrice.value);const n=()=>{let e="";t=!0;let a=Math.abs(Math.floor(c.minPrice.value)),n=Math.abs(Math.floor(c.maxPrice.value)),l=c.firstDay.value,d=c.secondDay.value,p=c.locationName.value,g=parseInt(u.innerText),m=parseInt(h.innerText),y=c.goAndReturn,f=parseInt(i.innerText);r.forEach(t=>{t.checked&&(e+=t.value+",")}),console.log("searchForm",c.minPrice.value);let v="";return""!=(e=e.substring(0,e.length-1))?v+=`categories=${e}`:(o("Choose at least one category"),t=!1),v+=`&fromLocationName=${p}`,l&&d&&d<l&&(o("Second day is lower then first day"),t=!1),n&&a&&n<a&&(o("Max price is lower then min price"),t=!1),console.log(a),console.log(n),a&&(v+=`&minPrice=${a}`),n&&(v+=`&maxPrice=${n}`),m&&(v+=`&children=${m}`),g&&(v+=`&adults=${g}`),l&&(v+=`&firstDay=${l=s(l)}`),d&&(v+=`&secondDay=${d=s(d)}`),y.value&&f>0&&(v+=`&days=${f}`),v};p.addEventListener("click",e=>{e.preventDefault();let t=parseInt(i.innerText);t>0&&(i.innerText=t-1)}),d.addEventListener("click",e=>{e.preventDefault();let t=parseInt(i.innerText);i.innerText=t+1}),g.addEventListener("click",e=>{e.preventDefault();let t=parseInt(u.innerText);u.innerText=t+1}),m.addEventListener("click",e=>{e.preventDefault();let t=parseInt(u.innerText);t>0&&(u.innerText=t-1)}),f.addEventListener("click",e=>{e.preventDefault();let t=parseInt(h.innerText);t>0&&(h.innerText=t-1)}),y.addEventListener("click",e=>{e.preventDefault();let t=parseInt(h.innerText);h.innerText=t+1});let S="";const E=t=>{console.log("da"),console.log(t.target),console.log(t.target.parentNode),console.log(t.target.parentNode.parentNode);const a=t.target.parentNode.parentNode.parentNode.getAttribute("data-searchid"),n=t.target.parentNode.parentNode.parentNode.getAttribute("data-locationid"),o=t.target.parentNode,l=t.target.parentNode.childNodes;let s,r;l[0].classList.contains("far")?(s=l[0],r=l[1]):(s=l[1],r=l[0]),console.log("fas element",r);let c=!0;"none"===s.style.display&&(c=!1);let i=`http://localhost:8080/searches?searchId=${a}&locationId=${n}`;console.log("url",i),fetch(i,{method:"PATCH",body:JSON.stringify({saveState:c})}).then(t=>{console.log("daaaa"),t.json().then(t=>{console.log("aici"),console.log("result",t),t.success&&(e.toggleSaveBtn({saveBtn:o,saveState:c}),e.changeSaveStateAttribute({saveBtn:o,saveState:c}))}).catch(e=>console.log("err",e))})},L=e=>{console.log(e.target.parentNode.parentNode.parentNode);const t=e.target.parentNode.parentNode.parentNode;localStorage.setItem("searchId",t.getAttribute("data-searchId")),localStorage.setItem("locationId",t.getAttribute("data-locationId")),localStorage.setItem("category",t.getAttribute("data-category")),localStorage.setItem("country",t.getAttribute("data-country")),localStorage.setItem("name",t.getAttribute("data-name")),localStorage.setItem("price",t.getAttribute("data-price")),localStorage.setItem("saveState",t.getAttribute("data-savedState")),localStorage.setItem("code",t.getAttribute("data-code")),window.location.replace("http://localhost:8080/trip-details")},T=()=>{console.log("loadMoreLocations"),S&&console.log("da");let t=document.querySelectorAll(".result"),a=`http://localhost:8080/locations?searchId=${t[0].getAttribute("data-searchid")}&skip=${t.length}`;console.log("url",a),fetch(a,{method:"GET"}).then(t=>{t.json().then(t=>{if(console.log("aici"),console.log("result",t),t.success){const{searchId:a,locations:n,moreLocations:o}=t.result;e.addLocations({getDetails:L,searchId:a,locations:n,moreLocations:o,changeSaveStateOfLocation:E})}else o(t.text)}).catch(e=>console.log("err",e))})};b.addEventListener("click",e=>{e.preventDefault(),T()}),c.addEventListener("submit",e=>{e.preventDefault();const a=n();t&&(l(),P(a))});const P=t=>{console.log("searchLocartion");let a="http://localhost:8080/trips";a=`http://localhost:8080/trips?${t}`,console.log("url",a),e.removeOldLocations(),fetch(a,{method:"POST"}).then(t=>{t.json().then(t=>{if(console.log("result",t),t.success){const{locations:a,moreLocations:n,searchId:o}=t.result;e.addLocations({getDetails:L,searchId:o,locations:a,moreLocations:n,changeSaveStateOfLocation:E})}else o(t.text)}).catch(e=>console.log("err",e))})}}},function(e,t,a){const{usableElements:n}=a(0),{addTripPage_results:o,addTripPage_loadMoreBtn:l}=n;console.log("addTripPage_results",o);e.exports={viewAddTrip:{addLocations:({searchId:e,locations:t,moreLocations:a,changeSaveStateOfLocation:n,getDetails:s})=>{t.forEach(t=>{console.log("location",t),console.log("searchId",e);let r=document.createElement("li");r.classList.add("result"),r.setAttribute("data-searchId",e),r.setAttribute("data-locationId",t.location._id),r.setAttribute("data-category",t.location.category),r.setAttribute("data-country",t.location.country.name),r.setAttribute("data-name",t.location.name),r.setAttribute("data-price",t.price),r.setAttribute("data-savedState","0"),r.setAttribute("data-code",t.location.code);let c=document.createElement("div");c.classList.add("category"),c.innerText=t.location.category;let i=document.createElement("div");i.classList.add("country"),i.innerText=t.location.country.name;let d=document.createElement("div");d.classList.add("wrapper");let p=document.createElement("div");p.classList.add("wrapper");let u=document.createElement("span");u.classList.add("location-name"),u.innerText=t.location.name,u.addEventListener("click",s);let g=document.createElement("div");g.classList.add("price"),g.innerText=`From ${t.price} Euro`,p.appendChild(u),p.appendChild(g);let m=document.createElement("button");m.classList.add("save-btn"),m.addEventListener("click",n);let h=document.createElement("i");h.classList.add("far"),h.classList.add("fa-heart");let y=document.createElement("i");y.classList.add("fas"),y.classList.add("fa-heart"),m.appendChild(h),m.appendChild(y),d.appendChild(p),d.appendChild(m),r.appendChild(c),r.appendChild(i),r.appendChild(d),o.appendChild(r),l.style.display=a?"flex":"none"})},removeOldLocations:()=>{for(;o.firstChild;)o.removeChild(o.firstChild);l.style.display="none"},toggleSaveBtn:({saveBtn:e,saveState:t})=>{let a,n;e.children[0].classList.contains("far")?(n=e.children[0],a=e.children[1]):(n=e.children[1],a=e.children[0]),t?(n.style.display="none",a.style.display="inline-block",e.parentNode.parentNode.setAttribute("data-savedState","1")):(n.style.display="inline-block",a.style.display="none",e.parentNode.parentNode.setAttribute("data-savedState","0"))},changeSaveStateAttribute:({saveBtn:e,saveState:t})=>{let a=e.parentNode.parentNode;t?a.setAttribute("data-savedState","1"):a.setAttribute("data-savedState","0")}}}},function(e,t,a){const{viewTripDetails:n}=a(14),{usableElements:o}=a(0),{tripDetailsPage_loadMoreBtn:l,tripDetailsPage_flights:s}=o,{addTripBtn:r,manageTripsBtn:c,settingsBtn:i}=o;r&&c&&i&&(r.addEventListener("click",()=>{window.location.replace("http://localhost:8080/add-trip")}),c.addEventListener("click",()=>{window.location.replace("http://localhost:8080/")}),i.addEventListener("click",()=>{window.location.replace("http://localhost:8080/settings")}));const d=e=>{console.log("da"),console.log(e.target),console.log(e.target.parentNode),console.log(e.target.parentNode.parentNode);const t=localStorage.getItem("searchId"),a=localStorage.getItem("locationId"),o=e.target.parentNode,l=e.target.parentNode.children;let s,r;l[0].classList.contains("far")?(s=l[0],r=l[1]):(s=l[1],r=l[0]),console.log("fas element",r);let c=!0;"none"===s.style.display&&(c=!1);let i=`http://localhost:8080/searches?searchId=${t}&locationId=${a}`;console.log("url",i),fetch(i,{method:"PATCH",body:JSON.stringify({saveState:c})}).then(e=>{console.log("daaaa"),e.json().then(e=>{console.log("aici"),console.log("result",e),e.success&&(n.toggleSaveBtn({saveBtn:o,saveState:c}),c?localStorage.setItem("saveState","1"):localStorage.setItem("saveState","0"))}).catch(e=>console.log("err",e))})};if(s&&l){const e=localStorage.getItem("searchId"),t=(localStorage.getItem("locationId"),localStorage.getItem("name")),a=localStorage.getItem("category"),o=localStorage.getItem("country");let r=localStorage.getItem("saveState");const c=localStorage.getItem("code");r="0"!==r,n.showDetails({name:t,category:a,country:o,saveState:r,changeSaveStateOfLocation:d});const i=e=>{let t=e.target.getAttribute("data-bookingLink");console.log(e.target),window.open(t,"_blank")},p=()=>{const t=s.children.length;let a=`http://localhost:8080/flights?searchId=${e}&toLocationCode=${c}&skip=${t}`;console.log("url",a),fetch(a,{method:"GET"}).then(e=>{e.json().then(e=>{console.log("aici"),console.log("result",e),e.success&&n.showFlights({goToKiwiBooking:i,flights:e.result.flights,moreFlights:e.result.moreFlights})}).catch(e=>console.log("err",e))})};p(),l.addEventListener("click",e=>{console.log("bla"),p()})}},function(e,t,a){console.log("viewTripDetails");const{usableElements:n}=a(0),{tripDetailsPage_locationName:o,tripDetailsPage_saveBtn:l,tripDetailsPage_category:s,tripDetailsPage_countryName:r,tripDetailsPage_flights:c,tripDetailsPage_loadMoreBtn:i}=n;let d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];const u=({saveBtn:e,saveState:t})=>{let a,n;e.children[0].classList.contains("far")?(n=e.children[0],a=e.children[1]):(n=e.children[1],a=e.children[0]),t?(n.style.display="none",a.style.display="inline-block"):(n.style.display="inline-block",a.style.display="none")};if(o&&l&&s&&r&&c&&i){const t=({name:e,category:t,country:a,saveState:n,changeSaveStateOfLocation:c})=>{s.innerText=t,r.innerText=a,o.innerText=e,l.addEventListener("click",c),u({saveBtn:l,saveState:n})},a=({flights:e,moreFlights:t,goToKiwiBooking:a})=>{e.forEach(e=>{console.log("flight",e);let t=document.createElement("li");t.classList.add("flight");let n=document.createElement("div");n.classList.add("wrapper");let o=document.createElement("span");o.classList.add("price"),o.innerText=`${e.price} EURO`;let l=document.createElement("button");l.classList.add("check-on-kiwi"),l.innerText="check on Kiwi.com",l.setAttribute("data-bookingLink",e.bookingLink),l.addEventListener("click",a),n.appendChild(o),n.appendChild(l);let s=new Date(e.dTimeUTC),r=new Date(e.aTimeUTC),i=document.createElement("div");i.classList.add("wrapper");let u=document.createElement("span");u.classList.add("airline-company-name"),u.innerText="Companie";let g=document.createElement("div");g.classList.add("departure");let m=document.createElement("span");m.classList.add("departure-time"),m.innerText=`${s.getHours()} : ${s.getMinutes()}`;let h=document.createElement("span");h.classList.add("departure-city"),h.innerText=e.flyFrom,g.appendChild(m),g.appendChild(h);let y=document.createElement("div");y.classList.add("number-of-stops"),e.days?y.innerText=`${e.routes.length/2} stops`:y.innerText=`${e.routes.length} stops`;let f=document.createElement("div");f.classList.add("arrival");let v=document.createElement("span");v.classList.add("arrival-time"),v.innerText=`${r.getHours()} : ${r.getMinutes()}`;let b=document.createElement("span");b.classList.add("arrival-city"),b.innerText=e.flyTo,f.appendChild(v),f.appendChild(b);let S=document.createElement("div");S.classList.add("duration"),S.innerText="214",i.appendChild(u),i.appendChild(g),i.appendChild(y),i.appendChild(f),i.appendChild(S),t.appendChild(n),t.appendChild(i);let E=document.createElement("div");E.classList.add("details"),e.routes.forEach(e=>{let t=document.createElement("div");t.classList.add("departure");let a=new Date(e.dTimeUTC),n=new Date(e.aTimeUTC),o=document.createElement("span");o.classList.add("departure-date"),o.innerText=`${d[a.getDay()]}, ${a.getDate()} ${p[a.getMonth()]} ${a.getFullYear()}`;let l=document.createElement("div");l.classList.add("wrapper");let s=document.createElement("div");s.classList.add("wrapper");let r=document.createElement("span");r.classList.add("departure-time"),r.innerText=`${a.getHours()} : ${a.getMinutes()}`;let c=document.createElement("span");c.classList.add("departure-city"),c.innerText=`${e.cityFrom}(${e.flyFrom})`,s.appendChild(r),s.appendChild(c);let i=document.createElement("div");i.classList.add("wrapper");let u=document.createElement("span");u.classList.add("arrival-time"),u.innerText=`${n.getHours()} : ${n.getMinutes()}`;let g=document.createElement("span");g.classList.add("arrival-city"),g.innerText=`${e.cityTo}(${e.flyTo})`,i.appendChild(u),i.appendChild(g),l.appendChild(s),l.appendChild(i);let m=document.createElement("div");m.classList.add("wrapper");let h=document.createElement("span");h.classList.add("duration"),h.innerText="13h5m",m.appendChild(h),t.appendChild(o),t.appendChild(l),t.appendChild(m),E.appendChild(t)}),t.append(E),c.appendChild(t)}),i.style.display=t?"flex":"none"};e.exports={viewTripDetails:{showDetails:t,showFlights:a,toggleSaveBtn:u}}}},function(e,t,a){const{viewMainPage:n}=a(16),{usableElements:o}=a(0),{mainPage_searches:l,mainPage_loadMoreBtn:s}=o;console.log("mainPage_searches",l),console.log("mainPage_loadMoreBtb",s);const r=()=>{let e=`http://localhost:8080/locations?savedLocations=1&skip=${l.children.length}`;console.log("url",e),fetch(e,{method:"GET"}).then(e=>{e.json().then(e=>{console.log("aici"),console.log("result",e.result),console.log("success",e.success),e.success&&n.showLocations({result:e.result,changeSaveStateOfLocation:c,getDetails:i})}).catch(e=>console.log("err",e))})},c=e=>{console.log("da"),console.log(e.target),console.log(e.target.parentNode),console.log(e.target.parentNode.parentNode);const t=e.target.parentNode.parentNode.parentNode.getAttribute("data-searchid"),a=e.target.parentNode.parentNode.parentNode.getAttribute("data-locationid"),o=e.target.parentNode,l=e.target.parentNode.childNodes;let s,r;l[0].classList.contains("far")?(s=l[0],r=l[1]):(s=l[1],r=l[0]),console.log("fas element",r);let c=!0;"none"===s.style.display&&(c=!1);let i=`http://localhost:8080/searches?searchId=${t}&locationId=${a}`;console.log("url",i),fetch(i,{method:"PATCH",body:JSON.stringify({saveState:c})}).then(e=>{console.log("daaaa"),e.json().then(e=>{console.log("aici"),console.log("result",e),e.success&&(n.toggleSaveBtn({saveBtn:o,saveState:c}),n.changeSaveStateAttribute({saveBtn:o,saveState:c}))}).catch(e=>console.log("err",e))})},i=e=>{console.log(e.target.parentNode.parentNode.parentNode);const t=e.target.parentNode.parentNode.parentNode;localStorage.setItem("searchId",t.getAttribute("data-searchId")),localStorage.setItem("locationId",t.getAttribute("data-locationId")),localStorage.setItem("category",t.getAttribute("data-category")),localStorage.setItem("country",t.getAttribute("data-country")),localStorage.setItem("name",t.getAttribute("data-name")),localStorage.setItem("price",t.getAttribute("data-price")),localStorage.setItem("saveState",t.getAttribute("data-savedState")),localStorage.setItem("code",t.getAttribute("data-code")),window.location.replace("http://localhost:8080/trip-details")};l&&s&&(console.log("DAAA"),r(),s.addEventListener("click",e=>{e.preventDefault(),r()}))},function(e,t,a){const{usableElements:n}=a(0),{mainPage_searches:o,mainPage_loadMoreBtn:l}=n;e.exports={viewMainPage:{showLocations:({result:e,changeSaveStateOfLocation:t,getDetails:a})=>{const{moreSearches:n,searches:s}=e;s.forEach(e=>{let n=document.createElement("li");if(n.classList.add("search"),e.adults){let t=document.createElement("span");t.classList.add("adults-number"),t.innerText=`${e.adults} adults`,n.appendChild(t)}if(e.children){let t=document.createElement("span");t.classList.add("children-number"),t.innerText=`${e.children} children`,n.appendChild(t)}if(e.days){let t=document.createElement("span");t.classList.add("days-number"),t.innerText=`Spend ${e.days}`,n.appendChild(t)}let l=document.createElement("span");l.classList.add("categories");let s="";if(e.categories.forEach(e=>s+=`${e}  `),l.innerText=`categories: ${s}`,n.appendChild(l),e.calendar){document.createElement("span").classList.add("calendar");let t="calendar: ";e.calendar.firstDay&&(t+=`${new Date(e.calendar.firstDay)} -`),e.calendar.secondDay&&(t+=`- ${new Date(e.calendar.secondDay)}`)}if(e.price){let t=document.createElement("span");t.classList.add("price");let a="price: ";e.price.minPrice&&(a+=`${e.price.minPrice} -`),e.price&&e.price.maxPrice&&(a+=`- ${e.price.maxPrice}`),t.innerText=a,n.appendChild(t)}let r=document.createElement("ul");r.classList.add("saved-locations");let c=document.createElement("span");c.classList.add("new-locations-text"),c.innerText="You might be interested: ";let i=document.createElement("ul");i.classList.add("new-locations"),e.locationsFlightsBestPrices.forEach(n=>{let o=document.createElement("li");o.classList.add("location"),o.setAttribute("data-searchId",e._id),o.setAttribute("data-locationId",n.location._id),o.setAttribute("data-category",n.location.category),o.setAttribute("data-country",n.location.country.name),o.setAttribute("data-name",n.location.name),o.setAttribute("data-price",n.price),o.setAttribute("data-savedState","0"),o.setAttribute("data-code",n.location.code);let l=document.createElement("span");l.classList.add("category"),l.innerText=n.location.category;let s=document.createElement("div");s.classList.add("wrapper");let c=document.createElement("div");c.classList.add("wrapper");let d=document.createElement("span");d.classList.add("location-name"),d.innerText=n.location.name,d.addEventListener("click",a);let p=document.createElement("span");p.classList.add("country"),p.innerText=n.location.country.name;let u=document.createElement("span");u.classList.add("price"),u.innerText=`From ${n.price} EUR`,c.appendChild(d),c.appendChild(p),c.appendChild(u);let g=document.createElement("button");g.classList.add("save-btn"),g.addEventListener("click",t);let m=document.createElement("i");m.classList.add("far"),m.classList.add("fa-heart");let h=document.createElement("i");h.classList.add("fas"),h.classList.add("fa-heart"),n.saved&&(console.log("daa"),m.style.display="none",h.style.display="inline-block",o.setAttribute("data-savedState","1")),g.appendChild(m),g.appendChild(h),s.appendChild(c),s.appendChild(g),o.appendChild(l),o.appendChild(s),n.new?(console.log("da"),i.appendChild(o)):(r.appendChild(o),console.log("nu"))}),n.appendChild(r),console.log("AIICI"),console.log("ulNewLocations.length",i.children.length),i.children.length&&n.appendChild(c),n.appendChild(i),o.appendChild(n)}),l.style.display=n?"flex":"none"},toggleSaveBtn:({saveBtn:e,saveState:t})=>{let a,n;e.children[0].classList.contains("far")?(n=e.children[0],a=e.children[1]):(n=e.children[1],a=e.children[0]),t?(n.style.display="none",a.style.display="inline-block",e.parentNode.parentNode.setAttribute("data-savedState","1")):(e.parentNode.parentNode.setAttribute("data-savedState","0"),n.style.display="inline-block",a.style.display="none")},changeSaveStateAttribute:({saveBtn:e,saveState:t})=>{let a=e.parentNode.parentNode;t?a.setAttribute("data-savedState","1"):a.setAttribute("data-savedState","0")}}}},function(e,t,a){const{usableElements:n}=a(0),{settingsPage_logoutBtn:o}=n;o&&o.addEventListener("click",()=>{fetch("http://localhost:8080/logout-user",{method:"GET"}).then(e=>{e.json().then(e=>{}).catch(()=>{}),location.reload()}).catch(e=>{console.log("err from server",e)})})}]);